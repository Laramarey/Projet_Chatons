<!-- Index -->
<div id="filter">
  <p id="all" class="btn btn-warning">All</p>
  <% @categories.each do |category| %>
  <p id=<%= category.name.split.join.downcase %> class="btn btn-success"><%= category.name %></p>
  <% end %>
<div>

<br>

<div class="row">

  <% @items.each do |item|%>
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="card h-100 <%= item.category.name.split.join.downcase %>">
        <%= image_tag item.picture, height: "200px;" %>
        <div class="card-body">
          <h4 class="card-title">
            <%= link_to item.title, item_path(item)%></a>
          </h4>
          <h5><%= item.price%></h5>
          <p class="card-text"><%= item.description%></p>
        </div>
        <div class="card-footer">
          <small class="text-muted">★ ★ ★ ★ ☆</small>
          <b><%= item.category.name %></b>
        </div>
      </div>
    </div>
  <%end%>

</div>


<script>

<% @categories.each do |category| %>
  document.getElementById('<%= category.name.split.join.downcase %>').addEventListener('click', function(e){
        e.preventDefault;
        let index = document.querySelector('.row')
    for (let i = 0; i < index.children.length; i++) {
      if (!index.children[i].firstElementChild.classList.contains('<%= category.name.split.join.downcase %>')){
        index.children[i].style.display = "none"
      } else {
        index.children[i].style.display = "flex"
      }
    }
  });
<% end %>

document.getElementById('all').addEventListener('click', function(e){
      e.preventDefault;
      let index = document.querySelector('.row')
  for (let i = 0; i < index.children.length; i++) {
      index.children[i].style.display = "flex"
  }
});

</script>